



# 控制端配置

### 配置工作总览

!> 在完成控制端的部署后，我们还需要几个配置工作让整个系统运行起来。

```wiki
1. 添加【蜜罐服务】，让系统获得相应蜜罐的能力。
2. 创建【服务模板】，模板是数个蜜罐服务的集合，在大规模部署的环境中，模板可以帮我们更高效管理我们的集群。
3. 【增加节点】，单机版自带一个节点，集群版不带节点。系统至少需要一个节点才能正常运行。
4. 为蜜罐节点选择【服务模板】，选择了什么服务模板，蜜罐节点就具有了模板中的蜜罐能力。
```



### 添加蜜罐服务

!> 控制端运行起来后，我们需要做的第一件事情就是下载蜜罐服务。您有2种方法可以添加蜜罐服务，任选一种即可。

> 【服务管理】中下载蜜罐服务

```wiki
1. 登陆控制端后，打开【服务管理】页面，首次登陆页面上蜜罐服务都是灰色。
2. 选择自己需要的蜜罐服务进行下载。
```

<img src="http://img.threatbook.cn/hfish/20210616164014.png" alt="image-20210616164012531" style="zoom:50%;" />



> 手动上传蜜罐服务包

**当您处于离线环境不方便在线安装情况下，您可以使用手动上传安装的方式。**

```wiki
1. 下载最新官方服务包 http://img.threatbook.cn/hfish/svc/services-<% version %>.tar.gz
2. 在新增服务页面上选择该服务包上传。
```

<img src="http://img.threatbook.cn/hfish/20210616165216.png" alt="image-20210616165214921" style="zoom:50%;" />



> *上传自定义web蜜罐

​	如果您有自定义web蜜罐的需求，我们为您准备了开发样例，您可以参考我们的[文档](https://hfish.io/#/function?id=web%e8%9c%9c%e7%bd%90%e8%87%aa%e5%ae%9a%e4%b9%89%e5%bc%80%e5%8f%91)完成蜜罐的开发工作后，进行上传。
​	当然您也可以在社区中寻找其它用户开发好的蜜罐上传后使用。



### 创建模板

!> 蜜罐服务添加完成后，我们需要创建模板，把数个蜜罐服务自由组合成为模板。当前每个模板最多支持5个蜜罐服务。

<img src="http://img.threatbook.cn/hfish/20210616170818.png" alt="image-20210616170816548" style="zoom:50%;" />



### 增加节点

!> 点击增加节点，选择相应版本的【节点安装包】，确定

<img src="http://img.threatbook.cn/hfish/20210616171500.png" alt="image-20210616171459269" style="zoom:50%;" />

```wiki
- 如果您在上面的操作中，选择的是linux安装包，在【确定】后，会出现如下页面，您可以用两种方式让您的节点主机完成部署。
1. 一句话脚本，直接在节点主机上运行
2. 下载可执行文件，并把这个文件上传到节点主机上运行

- 如果您在上面的操作中，选择的windows安装包，在【确定】后，只有一种方式供您选择。
1. 下载可执行文件，并把这个文件上传到节点主机上运行
```

<img src="http://img.threatbook.cn/hfish/20210616172029.png" alt="image-20210616172027825" style="zoom:50%;" />



### 为节点选择服务模板

> 展开蜜罐节点，选择上面创建的蜜罐模板

<img src="http://img.threatbook.cn/hfish/20210616173018.png" alt="image-20210616173015062" style="zoom:50%;" />



> 刚变更模板后的蜜罐服务状态为【启用】

<img src="http://img.threatbook.cn/hfish/20210616173055.png" alt="image-20210616173053947" style="zoom:50%;" />



> 节点正常完成模板加载后，服务状态应该为【在线】。如果是【离线】，说明蜜罐服务没有正常启动，请参考我们后面的【排错说明】，找到问题。

<img src="http://img.threatbook.cn/hfish/20210616173129.png" alt="image-20210616173128526" style="zoom:50%;" />